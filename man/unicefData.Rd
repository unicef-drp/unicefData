% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/unicefData.R, R/zzz_aliases.R
\name{unicefData}
\alias{unicefData}
\alias{unicefdata}
\title{Fetch UNICEF SDMX data or structure}
\usage{
unicefData(
  indicator = NULL,
  dataflow = NULL,
  countries = NULL,
  start_year = NULL,
  end_year = NULL,
  sex = "_T",
  age = NULL,
  wealth = NULL,
  residence = NULL,
  maternal_edu = NULL,
  tidy = TRUE,
  country_names = TRUE,
  max_retries = 3,
  cache = FALSE,
  page_size = 1e+05,
  detail = c("data", "structure"),
  version = NULL,
  format = c("long", "wide", "wide_indicators", "wide_sex", "wide_age", "wide_wealth",
    "wide_residence", "wide_maternal_edu"),
  latest = FALSE,
  add_metadata = NULL,
  dropna = FALSE,
  simplify = FALSE,
  mrv = NULL,
  raw = FALSE,
  ignore_duplicates = FALSE,
  flow = NULL,
  key = NULL,
  start_period = NULL,
  end_period = NULL,
  retry = NULL
)

unicefdata(
  indicator = NULL,
  dataflow = NULL,
  countries = NULL,
  start_year = NULL,
  end_year = NULL,
  sex = "_T",
  age = NULL,
  wealth = NULL,
  residence = NULL,
  maternal_edu = NULL,
  tidy = TRUE,
  country_names = TRUE,
  max_retries = 3,
  cache = FALSE,
  page_size = 1e+05,
  detail = c("data", "structure"),
  version = NULL,
  format = c("long", "wide", "wide_indicators", "wide_sex", "wide_age", "wide_wealth",
    "wide_residence", "wide_maternal_edu"),
  latest = FALSE,
  add_metadata = NULL,
  dropna = FALSE,
  simplify = FALSE,
  mrv = NULL,
  raw = FALSE,
  ignore_duplicates = FALSE,
  flow = NULL,
  key = NULL,
  start_period = NULL,
  end_period = NULL,
  retry = NULL
)
}
\arguments{
\item{indicator}{Character vector of indicator codes (e.g., "CME_MRY0T4").
Previously called 'key'. Both parameter names are supported.}

\item{dataflow}{Character vector of dataflow IDs (e.g., "CME", "NUTRITION").
Previously called 'flow'. Both parameter names are supported.}

\item{countries}{Character vector of ISO3 country codes (e.g., c("ALB", "USA")).
If NULL (default), fetches all countries.}

\item{start_year}{Optional starting year (e.g., 2015).
Previously called 'start_period'. Both parameter names are supported.}

\item{end_year}{Optional ending year (e.g., 2023).
Previously called 'end_period'. Both parameter names are supported.}

\item{sex}{Sex disaggregation: "_T" (total, default), "F" (female), "M" (male).}

\item{age}{Filter by age group. Default is NULL (keeps totals).}

\item{wealth}{Filter by wealth quintile. Default is NULL (keeps totals).}

\item{residence}{Filter by residence (e.g. "URBAN", "RURAL"). Default is NULL (keeps totals).}

\item{maternal_edu}{Filter by maternal education. Default is NULL (keeps totals).}

\item{tidy}{Logical; if TRUE (default), returns cleaned tibble with standardized column names.}

\item{country_names}{Logical; if TRUE (default), adds country name column.}

\item{max_retries}{Number of retry attempts on failure (default: 3).
Previously called 'retry'. Both parameter names are supported.}

\item{cache}{Logical; if TRUE, memoises results.}

\item{page_size}{Integer rows per page (default: 100000).}

\item{detail}{"data" (default) or "structure" for metadata.}

\item{version}{Optional SDMX version; if NULL, auto-detected.}

\item{format}{Output format: "long" (default), "wide" (years as columns),
"wide_indicators" (indicators as columns), or wide by dimension:
"wide_sex", "wide_age", "wide_wealth", "wide_residence", "wide_maternal_edu".}

\item{latest}{Logical; if TRUE, keep only the most recent non-missing value per country.
The year may differ by country. Useful for cross-sectional analysis.}

\item{add_metadata}{Character vector of metadata to add: "region", "income_group",
"continent", "indicator_name", "indicator_category".}

\item{dropna}{Logical; if TRUE, remove rows with missing values.}

\item{simplify}{Logical; if TRUE, keep only essential columns.}

\item{mrv}{Integer; keep only the N most recent values per country (Most Recent Values).}

\item{raw}{Logical; if TRUE, return raw SDMX data without column standardization.
Default is FALSE (clean, standardized output matching Python package).}

\item{ignore_duplicates}{Logical; if FALSE (default), raises an error when exact
duplicate rows are found (all column values identical). Set to TRUE to allow
automatic removal of duplicates.}

\item{flow}{Deprecated. Use 'dataflow' instead.}

\item{key}{Deprecated. Use 'indicator' instead.}

\item{start_period}{Deprecated. Use 'start_year' instead.}

\item{end_period}{Deprecated. Use 'end_year' instead.}

\item{retry}{Deprecated. Use 'max_retries' instead.}
}
\value{
Tibble with indicator data, or xml_document if detail="structure".
The 'period' column contains decimal years (see Time Period Handling section).
}
\description{
Download UNICEF indicator data from the SDMX data warehouse.
Supports automatic paging, retrying on transient failure, memoisation, and tidy-up.

This function uses unified parameter names consistent with the Python package.
}
\section{Time Period Handling}{

The UNICEF SDMX API returns TIME_PERIOD values in various formats (annual "2020"
or monthly "2020-03"). This function automatically converts monthly periods to
decimal years for consistent time-series analysis:
\itemize{
\item "2020" becomes 2020.0 (integer year)
\item "2020-01" becomes 2020.0833 (2020 + 1/12, January)
\item "2020-06" becomes 2020.5000 (2020 + 6/12, June)
\item "2020-11" becomes 2020.9167 (2020 + 11/12, November)
}
Formula: decimal_year = year + month/12
}

\examples{
\dontrun{
# Fetch under-5 mortality for specific countries (clean output)
df <- unicefData(
  indicator = "CME_MRY0T4",
  countries = c("ALB", "USA", "BRA"),
  start_year = 2015,
  end_year = 2023
)

# Get raw SDMX data with all original columns
df_raw <- unicefData(
  indicator = "CME_MRY0T4",
  countries = c("ALB", "USA"),
  raw = TRUE
)

# Get latest value per country (cross-sectional)
df <- unicefData(
  indicator = "CME_MRY0T4",
  latest = TRUE
)

# Wide format with region metadata
df <- unicefData(
  indicator = "CME_MRY0T4",
  format = "wide",
  add_metadata = c("region", "income_group")
)

# Multiple indicators merged automatically
df <- unicefData(
  indicator = c("CME_MRY0T4", "NT_ANT_HAZ_NE2_MOD"),
  format = "wide_indicators",
  latest = TRUE
)

# Legacy syntax (still supported)
df <- unicefData(flow = "CME", key = "CME_MRY0T4")
}
}
